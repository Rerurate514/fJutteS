<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script type="importmap">
        {
            "imports": {
                "fjuttes": "https://unpkg.com/fjuttes@3.0.1/dist/index.mjs"
            }
        }
    </script>

    <div id="fJutteS-Container"></div>

    <script type="module">
        import {
            View,
            TextForm,
            ElevatedButton,
            Row,
            assembleView,
            BaseCSS,
            TextCSS
        } from 'fjuttes';

        class SimpleSearchForm extends View {
            constructor(props) {
                super(props);
                this.state = {
                    searchText: ''
                };
                this.onSearchTextChanged = this.onSearchTextChanged.bind(this);
                this.onSearchButtonClicked = this.onSearchButtonClicked.bind(this);
            }

            createWrapView() {
                return document.createElement('div');
            }

            styledView(element) {
                element.style.padding = '16px';
                return element;
            }

            onSearchTextChanged(text) {
                this.state.searchText = text;
            }

            onSearchButtonClicked() {
                if (this.props.onSearch) {
                    this.props.onSearch(this.state.searchText);
                } else {
                    console.log('検索ワード:', this.state.searchText);
                    alert(`検索ワード: ${this.state.searchText}`);
                }
            }

            build() {
                return new Row({
                    children: [
                        new TextForm({
                            hintText: '検索ワードを入力',
                            onChanged: this.onSearchTextChanged,
                            baseCSS: new BaseCSS({
                                flexGrow: '1',
                                marginRight: '8px',
                            })
                        }),
                        new ElevatedButton({
                            child: new Text('検索'),
                            onClick: this.onSearchButtonClicked,
                            baseCSS: new BaseCSS({
                                padding: '8px 16px',
                            }),
                            textCSS: new TextCSS({
                                fontWeight: 'bold',
                            })
                        }),
                    ],
                    baseCSS: new BaseCSS({
                        alignItems: 'center',
                    })
                });
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            assembleView(
                new SimpleSearchForm({
                    onSearch: (searchText) => {
                        console.log('親コンポーネントで検索:', searchText);
                        alert(`親コンポーネントで検索: ${searchText}`);
                    }
                }),
                document.getElementById('fJutteS-Container')
            );
        });
    </script>
</body>
</html>
